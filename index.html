<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Feed</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  background:#fff;
  color:#111;
}
.grid{
  max-width:900px;
  margin:0 auto;
  padding:24px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:16px;
}
.card{
  border:1px solid #eee;
  border-radius:10px;
  overflow:hidden;
  background:#fff;
}
.thumb{
  width:100%;
  height:160px;
  object-fit:cover;
  display:block;
}
.content{padding:14px}
.item-title{
  margin:0 0 6px;
  font-size:16px;
  line-height:1.3;
}
.item-title a{
  text-decoration:none;
  color:#111;
}
.meta{
  font-size:12px;
  color:#777;
  margin-bottom:8px;
}
.desc{
  font-size:14px;
  line-height:1.5;
  margin:0;
  color:#333;
}
footer{
  text-align:center;
  padding:18px;
  font-size:12px;
  color:#888;
}
</style>
</head>

<body>

<script>
(() => {

  const JSON_FEED =
    "https://api.rss2json.com/v1/api.json?rss_url=https://phys.org/rss-feed/";

  const XML_FALLBACK =
    "https://api.allorigins.win/raw?url=https://phys.org/rss-feed/";

  function resolveImage(item){
    return (
      item.thumbnail ||
      item.enclosure?.link ||
      null
    );
  }

  function render(items){
    if(!items || !items.length) return;

    const grid=document.createElement("main");
    grid.className="grid";
    const frag=document.createDocumentFragment();

    items.forEach(it=>{
      const card=document.createElement("article");
      card.className="card";

      const imgURL=resolveImage(it);
      if(imgURL){
        const img=document.createElement("img");
        img.className="thumb";
        img.loading="lazy";
        img.src=imgURL;
        card.append(img);
      }

      const c=document.createElement("div");
      c.className="content";

      const h=document.createElement("h3");
      h.className="item-title";
      const a=document.createElement("a");
      a.href=it.link;
      a.target="_blank";
      a.rel="noopener";
      a.textContent=it.title;
      h.append(a);

      const m=document.createElement("div");
      m.className="meta";
      m.textContent=new Date(it.pubDate).toLocaleString();

      const d=document.createElement("p");
      d.className="desc";
      d.textContent=(it.description||"").replace(/<[^>]+>/g,"");

      c.append(h,m,d);
      card.append(c);
      frag.append(card);
    });

    grid.append(frag);
    document.body.append(grid);

    const footer=document.createElement("footer");
    footer.textContent="Â©ð™¿ð™·ð™¸ð™»ðšˆð™±ð™¾ðšƒð™¸ð™²ðš‚â„¢";
    document.body.append(footer);
  }

  async function loadJSON(){
    const r=await fetch(JSON_FEED,{cache:"no-store"});
    const j=await r.json();
    return j.items;
  }

  async function loadXML(){
    const r=await fetch(XML_FALLBACK,{cache:"no-store"});
    const t=await r.text();
    const x=new DOMParser().parseFromString(t,"text/xml");

    return [...x.querySelectorAll("item")].map(i=>{
      const media=i.querySelector("media\\:content");
      const enclosure=i.querySelector("enclosure");

      return {
        title:i.querySelector("title")?.textContent,
        link:i.querySelector("link")?.textContent,
        pubDate:i.querySelector("pubDate")?.textContent,
        description:i.querySelector("description")?.textContent,
        thumbnail:
          media?.getAttribute("url") ||
          enclosure?.getAttribute("url") ||
          null
      };
    });
  }

  (async()=>{
    try{
      const items=await loadJSON();
      if(items?.length) return render(items);
    }catch{}

    try{
      const items=await loadXML();
      if(items?.length) render(items);
    }catch{}
  })();

})();
</script>

</body>
</html>